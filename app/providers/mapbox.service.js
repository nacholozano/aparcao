"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/common/http");
require("rxjs/add/operator/map");
var TravelPoints = /** @class */ (function () {
    function TravelPoints() {
    }
    return TravelPoints;
}());
var RouteObject = /** @class */ (function () {
    function RouteObject() {
    }
    return RouteObject;
}());
var RouteLeg = /** @class */ (function () {
    function RouteLeg() {
    }
    return RouteLeg;
}());
var RouteStep = /** @class */ (function () {
    function RouteStep() {
    }
    return RouteStep;
}());
var Intersection = /** @class */ (function () {
    function Intersection() {
    }
    return Intersection;
}());
var Routes = /** @class */ (function () {
    function Routes() {
    }
    return Routes;
}());
var MapboxService = /** @class */ (function () {
    function MapboxService(_http) {
        this._http = _http;
        this._api = 'https://api.mapbox.com/directions/v5/mapbox/driving/';
        this._token = 'pk.eyJ1IjoibmFjaG8xMjM0MzI0MjM0IiwiYSI6ImNqZDNqN25kYTExemwycXFqbmRmdTNsc2QifQ.CInjKy5qEWs39L-gy_Aepg';
    }
    MapboxService.prototype.getDirections = function (travelPoints) {
        var points = [];
        return this._http
            .get(this._api + this._getStartAndFinish(travelPoints) + '?steps=true&access_token=' + this._token)
            .map(function (data) {
            data.routes[0].legs[0].steps.forEach(function (step) {
                step.intersections.forEach(function (intersection) {
                    points.push({
                        lat: intersection.location[1],
                        lng: intersection.location[0]
                    });
                });
            });
            return points;
        });
    };
    MapboxService.prototype.getDistance = function (travelPoints) {
        return this._http
            .get(this._api + this._getStartAndFinish(travelPoints) + '?access_token=' + this._token)
            .map(function (data) {
            return data.routes[0].distance;
        });
    };
    MapboxService.prototype._getStartAndFinish = function (travelPoints) {
        var start = travelPoints.start.lng + ',' + travelPoints.start.lat;
        var finish = travelPoints.finish.lng + ',' + travelPoints.finish.lat;
        return start + ';' + finish;
    };
    MapboxService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], MapboxService);
    return MapboxService;
}());
exports.MapboxService = MapboxService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwYm94LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtYXBib3guc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUEyQztBQUMzQyw2Q0FBa0Q7QUFDbEQsaUNBQStCO0FBRS9CO0lBQUE7SUFTQSxDQUFDO0lBQUQsbUJBQUM7QUFBRCxDQUFDLEFBVEQsSUFTQztBQUVEO0lBQUE7SUFPQSxDQUFDO0lBQUQsa0JBQUM7QUFBRCxDQUFDLEFBUEQsSUFPQztBQUVEO0lBQUE7SUFPQSxDQUFDO0lBQUQsZUFBQztBQUFELENBQUMsQUFQRCxJQU9DO0FBRUQ7SUFBQTtJQWdCQSxDQUFDO0lBQUQsZ0JBQUM7QUFBRCxDQUFDLEFBaEJELElBZ0JDO0FBRUQ7SUFBQTtJQWNBLENBQUM7SUFBRCxtQkFBQztBQUFELENBQUMsQUFkRCxJQWNDO0FBRUQ7SUFBQTtJQUVBLENBQUM7SUFBRCxhQUFDO0FBQUQsQ0FBQyxBQUZELElBRUM7QUFHRDtJQUtFLHVCQUNVLEtBQWlCO1FBQWpCLFVBQUssR0FBTCxLQUFLLENBQVk7UUFKbkIsU0FBSSxHQUFHLHNEQUFzRCxDQUFDO1FBQzlELFdBQU0sR0FBRyxzR0FBc0csQ0FBQztJQUlwSCxDQUFDO0lBRUwscUNBQWEsR0FBYixVQUFlLFlBQTBCO1FBQ3ZDLElBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUVsQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUs7YUFDZCxHQUFHLENBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDLEdBQUcsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQzthQUNuRyxHQUFHLENBQUUsVUFBQyxJQUFZO1lBRWpCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUUsVUFBQyxJQUFlO2dCQUNwRCxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBRSxVQUFDLFlBQTBCO29CQUNyRCxNQUFNLENBQUMsSUFBSSxDQUFDO3dCQUNWLEdBQUcsRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQzt3QkFDN0IsR0FBRyxFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO3FCQUM5QixDQUFDLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsbUNBQVcsR0FBWCxVQUFhLFlBQTBCO1FBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSzthQUNkLEdBQUcsQ0FBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFFO2FBQ3pGLEdBQUcsQ0FBRSxVQUFDLElBQVk7WUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVPLDBDQUFrQixHQUExQixVQUE0QixZQUEwQjtRQUNwRCxJQUFNLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDcEUsSUFBTSxNQUFNLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ3ZFLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQztJQUM5QixDQUFDO0lBekNVLGFBQWE7UUFEekIsaUJBQVUsRUFBRTt5Q0FPTSxpQkFBVTtPQU5oQixhQUFhLENBMkN6QjtJQUFELG9CQUFDO0NBQUEsQUEzQ0QsSUEyQ0M7QUEzQ1ksc0NBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcclxuXHJcbmNsYXNzIFRyYXZlbFBvaW50cyB7XHJcbiAgc3RhcnQ6IHsgXHJcbiAgICBsYXQ7XHJcbiAgICBsbmc7XHJcbiAgfVxyXG4gIGZpbmlzaDogeyBcclxuICAgIGxhdDsgXHJcbiAgICBsbmc7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBSb3V0ZU9iamVjdCB7XHJcbiAgZGlzdGFuY2U6IG51bWJlcjsgLy8gRmxvYXQgaW5kaWNhdGluZyB0aGUgZGlzdGFuY2UgdHJhdmVsZWQgaW4gbWV0ZXJzXHJcbiAgZHVyYXRpb246IG51bWJlcjsgLy8gRmxvYXQgaW5kaWNhdGluZyB0aGUgZXN0aW1hdGVkIHRyYXZlbCB0aW1lIGluIHNlY29uZHNcclxuICB3ZWlnaHQ6IG51bWJlcjsgLy8gRmxvYXQgaW5kaWNhdGluZyB0aGUgd2VpZ2h0IGluIHVuaXRzIGRlc2NyaWJlZCBieSB3ZWlnaHRfbmFtZVxyXG4gIHdlaWdodF9uYW1lOiBzdHJpbmc7IC8vIFN0cmluZyBpbmRpY2F0aW5nIHdoaWNoIHdlaWdodCB3YXMgdXNlZC4gVGhlIGRlZmF1bHQgaXMgcm91dGFiaWxpdHkgd2hpY2ggaXMgZHVyYXRpb24gYmFzZWQsIHdpdGggYWRkaXRpb25hbCBwZW5hbHRpZXMgZm9yIGxlc3MgZGVzaXJhYmxlIG1hbmV1dmVycy5cclxuICAvLyBnZW9tZXRyeTogRGVwZW5kaW5nIG9uIHRoZSBnZW9tZXRyaWVzIHBhcmFtZXRlciB0aGlzIGlzIGEgR2VvSlNPTiBMaW5lU3RyaW5nIG9yIGEgUG9seWxpbmUgc3RyaW5nLiBEZXBlbmRpbmcgb24gdGhlIG92ZXJ2aWV3IHBhcmFtZXRlciB0aGlzIGlzIHRoZSBjb21wbGV0ZSByb3V0ZSBnZW9tZXRyeSAoZnVsbCksIGEgc2ltcGxpZmllZCBnZW9tZXRyeSB0byB0aGUgem9vbSBsZXZlbCBhdCB3aGljaCB0aGUgcm91dGUgY2FuIGJlIGRpc3BsYXllZCBpbiBmdWxsIChzaW1wbGlmaWVkKSwgb3IgaXMgbm90IGluY2x1ZGVkIChmYWxzZSkuXHJcbiAgbGVnczogUm91dGVMZWdbXTsgLy8gQXJyYXkgb2YgUm91dGVMZWcgb2JqZWN0c1xyXG59XHJcblxyXG5jbGFzcyBSb3V0ZUxlZyB7XHJcbiAgZGlzdGFuY2U6IG51bWJlcjsgLy8gTnVtYmVyIGluZGljYXRpbmcgdGhlIGRpc3RhbmNlIHRyYXZlbGVkIGluIG1ldGVyc1xyXG4gIGR1cmF0aW9uOiBudW1iZXI7IC8vIE51bWJlciBpbmRpY2F0aW5nIHRoZSBlc3RpbWF0ZWQgdHJhdmVsIHRpbWUgaW4gc2Vjb25kc1xyXG4gIHN0ZXBzOiBSb3V0ZVN0ZXBbXSAvLyBEZXBlbmRpbmcgb24gdGhlIHN0ZXBzIHBhcmFtZXRlciwgZWl0aGVyIGFuIEFycmF5IG9mIFJvdXRlU3RlcCBvYmplY3RzICh0cnVlLCBkZWZhdWx0KSBvciBhbiBlbXB0eSBhcnJheSAoZmFsc2UpXHJcbiAgLy8gc3RlcHM6IERlcGVuZGluZyBvbiB0aGUgc3RlcHMgcGFyYW1ldGVyLCBlaXRoZXIgYW4gQXJyYXkgb2YgUm91dGVTdGVwIG9iamVjdHMgKHRydWUsIGRlZmF1bHQpIG9yIGFuIGVtcHR5IGFycmF5IChmYWxzZSlcclxuICAvLyBzdW1tYXJ5OiBEZXBlbmRpbmcgb24gdGhlIHN1bW1hcnkgcGFyYW1ldGVyLCBlaXRoZXIgYSBTdHJpbmcgc3VtbWFyaXppbmcgdGhlIHJvdXRlICh0cnVlLCBkZWZhdWx0KSBvciBhbiBlbXB0eSBTdHJpbmcgKGZhbHNlKVxyXG4gIC8vIGFubm90YXRpb246IEFuIGFubm90YXRpb25zIG9iamVjdCB0aGF0IGNvbnRhaW5zIGFkZGl0aW9uYWwgZGV0YWlscyBhYm91dCBlYWNoIGxpbmUgc2VnbWVudCBhbG9uZyB0aGUgcm91dGUgZ2VvbWV0cnkuIEVhY2ggZW50cnkgaW4gYW4gYW5ub3RhdGlvbnMgZmllbGQgY29ycmVzcG9uZHMgdG8gYSBjb29yZGluYXRlIGFsb25nIHRoZSByb3V0ZSBnZW9tZXRyeS5cclxufVxyXG5cclxuY2xhc3MgUm91dGVTdGVwIHtcclxuICAvLyBkaXN0YW5jZTogbnVtYmVyOyAvL051bWJlciBpbmRpY2F0aW5nIHRoZSBkaXN0YW5jZSB0cmF2ZWxlZCBpbiBtZXRlcnMgZnJvbSB0aGUgbWFuZXV2ZXIgdG8gdGhlIG5leHQgUm91dGVTdGVwLlxyXG4gIC8vIGR1cmF0aW9uOiBudW1iZXI7IC8vIE51bWJlciBpbmRpY2F0aW5nIHRoZSBlc3RpbWF0ZWQgdGltZSB0cmF2ZWxlZCB0aW1lIGluIHNlY29uZHMgZnJvbSB0aGUgbWFuZXV2ZXIgdG8gdGhlIG5leHQgUm91dGVTdGVwLlxyXG4gIC8vIGdlb21ldHJ5OiBEZXBlbmRpbmcgb24gdGhlIGdlb21ldHJpZXMgcGFyYW1ldGVyIHRoaXMgaXMgYSBHZW9KU09OIExpbmVTdHJpbmcgb3IgYSBQb2x5bGluZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmdWxsIHJvdXRlIGdlb21ldHJ5IGZyb20gdGhpcyBSb3V0ZVN0ZXAgdG8gdGhlIG5leHQgUm91dGVTdGVwXHJcbiAgLy8gbmFtZTogU3RyaW5nIHdpdGggdGhlIG5hbWUgb2YgdGhlIHdheSBhbG9uZyB3aGljaCB0aGUgdHJhdmVsIHByb2NlZWRzXHJcbiAgLy8gcmVmOiBBbnkgcm9hZCBkZXNpZ25hdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSByb2FkIG9yIHBhdGggbGVhZGluZyBmcm9tIHRoaXMgc3RlcOKAmXMgbWFuZXV2ZXIgdG8gdGhlIG5leHQgc3RlcOKAmXMgbWFuZXV2ZXIuIE9wdGlvbmFsbHkgaW5jbHVkZWQsIGlmIGRhdGEgaXMgYXZhaWxhYmxlLiBJZiBtdWx0aXBsZSByb2FkIGRlc2lnbmF0aW9ucyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSByb2FkLCB0aGV5IGFyZSBzZXBhcmF0ZWQgYnkgc2VtaWNvbG9ucy4gQSByb2FkIGRlc2lnbmF0aW9uIHR5cGljYWxseSBjb25zaXN0cyBvZiBhbiBhbHBoYWJldGljIG5ldHdvcmsgY29kZSAoaWRlbnRpZnlpbmcgdGhlIHJvYWQgdHlwZSBvciBudW1iZXJpbmcgc3lzdGVtKSwgYSBzcGFjZSBvciBoeXBoZW4sIGFuZCBhIHJvdXRlIG51bWJlci4gWW91IHNob3VsZCBub3QgYXNzdW1lIHRoYXQgdGhlIG5ldHdvcmsgY29kZSBpcyBnbG9iYWxseSB1bmlxdWU6IGZvciBleGFtcGxlLCBhIG5ldHdvcmsgY29kZSBvZiDigJxOSOKAnSBtYXkgYXBwZWFyIG9uIGEg4oCcTmF0aW9uYWwgSGlnaHdheeKAnSBvciDigJxOZXcgSGFtcHNoaXJl4oCdLiBNb3Jlb3ZlciwgYSByb3V0ZSBudW1iZXIgbWF5IG5vdCBldmVuIHVuaXF1ZWx5IGlkZW50aWZ5IGEgcm9hZCB3aXRoaW4gYSBnaXZlbiBuZXR3b3JrLlxyXG4gIC8vIGRlc3RpbmF0aW9uczogU3RyaW5nIHdpdGggdGhlIGRlc3RpbmF0aW9ucyBvZiB0aGUgd2F5IGFsb25nIHdoaWNoIHRoZSB0cmF2ZWwgcHJvY2VlZHMuIE9wdGlvbmFsbHkgaW5jbHVkZWQsIGlmIGRhdGEgaXMgYXZhaWxhYmxlLlxyXG4gIC8vIGV4aXRzOiBTdHJpbmcgd2l0aCB0aGUgZXhpdCBudW1iZXJzIG9yIG5hbWVzIG9mIHRoZSB3YXkuIE9wdGlvbmFsbHkgaW5jbHVkZWQsIGlmIGRhdGEgaXMgYXZhaWxhYmxlLlxyXG4gIC8vLyBkcml2aW5nX3NpZGU6IFRoZSBsZWdhbCBkcml2aW5nIHNpZGUgYXQgdGhlIGxvY2F0aW9uIGZvciB0aGlzIHN0ZXAuIEVpdGhlciBsZWZ0IG9yIHJpZ2h0LlxyXG4gIC8vIG1vZGU6IFN0cmluZyBpbmRpY2F0aW5nIHRoZSBtb2RlIG9mIHRyYW5zcG9ydGF0aW9uLiBQb3NzaWJsZSB2YWx1ZXM6XHJcbiAgICAgICAgLyogRm9yIG1hcGJveC9kcml2aW5nOiBkcml2aW5nLCBmZXJyeSwgdW5hY2Nlc3NpYmxlXHJcbiAgICAgICAgRm9yIG1hcGJveC93YWxraW5nOiB3YWxraW5nLCBmZXJyeSwgdW5hY2Nlc3NpYmxlXHJcbiAgICAgICAgRm9yIG1hcGJveC9jeWNsaW5nOiBjeWNsaW5nLCB3YWxraW5nLCBmZXJyeSwgdHJhaW4sIHVuYWNjZXNzaWJsZSAqL1xyXG4gIC8vIG1hbmV1dmVyOiBPbmUgU3RlcE1hbmV1dmVyIG9iamVjdFxyXG4gIC8vIHByb251bmNpYXRpb246IEEgc3RyaW5nIGNvbnRhaW5pbmcgYW4gSVBBIHBob25ldGljIHRyYW5zY3JpcHRpb24gaW5kaWNhdGluZyBob3cgdG8gcHJvbm91bmNlIHRoZSBuYW1lIGluIHRoZSBuYW1lIHByb3BlcnR5LiBUaGlzIHByb3BlcnR5IGlzIG9taXR0ZWQgaWYgcHJvbnVuY2lhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlIGZvciB0aGUgc3RlcC5cclxuICBpbnRlcnNlY3Rpb25zOiBJbnRlcnNlY3Rpb25bXVxyXG59XHJcblxyXG5jbGFzcyBJbnRlcnNlY3Rpb24ge1xyXG4gIGxvY2F0aW9uOiBzdHJpbmdbXTsgLy8gQSBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0gcGFpciBkZXNjcmliaW5nIHRoZSBsb2NhdGlvbiBvZiB0aGUgdHVybi5cclxuICAvLyBiZWFyaW5nczogQSBsaXN0IG9mIGJlYXJpbmcgdmFsdWVzIChmb3IgZXhhbXBsZSBbMCw5MCwxODAsMjcwXSkgdGhhdCBhcmUgYXZhaWxhYmxlIGF0IHRoZSBpbnRlcnNlY3Rpb24uIFRoZSBiZWFyaW5ncyBkZXNjcmliZSBhbGwgYXZhaWxhYmxlIHJvYWRzIGF0IHRoZSBpbnRlcnNlY3Rpb24uXHJcbiAgLy8gY2xhc3NlczogQW4gYXJyYXkgb2Ygc3RyaW5ncyBzaWduaWZ5aW5nIHRoZSBjbGFzc2VzIG9mIHRoZSByb2FkIGV4aXRpbmcgdGhlIGludGVyc2VjdGlvbi4gUG9zc2libGUgdmFsdWVzOlxyXG5cclxuICAvLyB0b2xsOiB0aGUgcm9hZCBjb250aW51ZXMgb24gYSB0b2xsIHJvYWRcclxuICAvLyBmZXJyeTogdGhlIHJvYWQgY29udGludWVzIG9uIGEgZmVycnlcclxuICAvLyByZXN0cmljdGVkOiB0aGUgcm9hZCBjb250aW51ZXMgb24gd2l0aCBhY2Nlc3MgcmVzdHJpY3Rpb25zXHJcbiAgLy8gbW90b3J3YXk6IHRoZSByb2FkIGNvbnRpbnVlcyBvbiBhIG1vdG9yd2F5XHJcbiAgLy8gdHVubmVsOiB0aGUgcm9hZCBjb250aW51ZXMgaW4gYSB0dW5uZWxcclxuICAvLyBlbnRyeTogQSBsaXN0IG9mIGVudHJ5IGZsYWdzLCBjb3JyZXNwb25kaW5nIGluIGEgMToxIHJlbGF0aW9uc2hpcCB0byB0aGUgYmVhcmluZ3MuIEEgdmFsdWUgb2YgdHJ1ZSBpbmRpY2F0ZXMgdGhhdCB0aGUgcmVzcGVjdGl2ZSByb2FkIGNvdWxkIGJlIGVudGVyZWQgb24gYSB2YWxpZCByb3V0ZS4gZmFsc2UgaW5kaWNhdGVzIHRoYXQgdGhlIHR1cm4gb250byB0aGUgcmVzcGVjdGl2ZSByb2FkIHdvdWxkIHZpb2xhdGUgYSByZXN0cmljdGlvbi5cclxuICAvLyBpbjogSW5kZXggaW50byBiZWFyaW5ncy9lbnRyeSBhcnJheS4gVXNlZCB0byBjYWxjdWxhdGUgdGhlIGJlYXJpbmcgYmVmb3JlIHRoZSB0dXJuLiBOYW1lbHksIHRoZSBjbG9ja3dpc2UgYW5nbGUgZnJvbSB0cnVlIG5vcnRoIHRvIHRoZSBkaXJlY3Rpb24gb2YgdHJhdmVsIGJlZm9yZSB0aGUgbWFuZXV2ZXIvcGFzc2luZyB0aGUgaW50ZXJzZWN0aW9uLiBUbyBnZXQgdGhlIGJlYXJpbmcgaW4gdGhlIGRpcmVjdGlvbiBvZiBkcml2aW5nLCB0aGUgYmVhcmluZyBoYXMgdG8gYmUgcm90YXRlZCBieSBhIHZhbHVlIG9mIDE4MC4gVGhlIHZhbHVlIGlzIG5vdCBzdXBwbGllZCBmb3IgZGVwYXJ0dXJlIG1hbmV1dmVycy5cclxuICAvLyBvdXQ6IEluZGV4IGludG8gdGhlIGJlYXJpbmdzL2VudHJ5IGFycmF5LiBVc2VkIHRvIGV4dHJhY3QgdGhlIGJlYXJpbmcgYWZ0ZXIgdGhlIHR1cm4uIE5hbWVseSwgVGhlIGNsb2Nrd2lzZSBhbmdsZSBmcm9tIHRydWUgbm9ydGggdG8gdGhlIGRpcmVjdGlvbiBvZiB0cmF2ZWwgYWZ0ZXIgdGhlIG1hbmV1dmVyL3Bhc3NpbmcgdGhlIGludGVyc2VjdGlvbi4gVGhlIHZhbHVlIGlzIG5vdCBzdXBwbGllZCBmb3IgYXJyaXZlIG1hbmV1dmVycy5cclxuICAvLyBsYW5lczogQXJyYXkgb2YgTGFuZSBvYmplY3RzIHRoYXQgcmVwcmVzZW50IHRoZSBhdmFpbGFibGUgdHVybiBsYW5lcyBhdCB0aGUgaW50ZXJzZWN0aW9uLiBJZiBubyBsYW5lIGluZm9ybWF0aW9uIGlzIGF2YWlsYWJsZSBmb3IgYW4gaW50ZXJzZWN0aW9uLCB0aGUgbGFuZXMgcHJvcGVydHkgd2lsbCBub3QgYmUgcHJlc2VudC5cclxufVxyXG5cclxuY2xhc3MgUm91dGVzIHtcclxuICByb3V0ZXM6IFJvdXRlT2JqZWN0W107XHJcbn1cclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIE1hcGJveFNlcnZpY2Uge1xyXG5cclxuICBwcml2YXRlIF9hcGkgPSAnaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9kaXJlY3Rpb25zL3Y1L21hcGJveC9kcml2aW5nLyc7XHJcbiAgcHJpdmF0ZSBfdG9rZW4gPSAncGsuZXlKMUlqb2libUZqYUc4eE1qTTBNekkwTWpNMElpd2lZU0k2SW1OcVpETnFOMjVrWVRFeGVtd3ljWEZxYm1SbWRUTnNjMlFpZlEuQ0luakt5NXFFV3MzOUwtZ3lfQWVwZyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBfaHR0cDogSHR0cENsaWVudFxyXG4gICkgeyB9XHJcblxyXG4gIGdldERpcmVjdGlvbnMoIHRyYXZlbFBvaW50czogVHJhdmVsUG9pbnRzICkge1xyXG4gICAgY29uc3QgcG9pbnRzID0gW107XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBcclxuICAgICAgLmdldCggdGhpcy5fYXBpICsgdGhpcy5fZ2V0U3RhcnRBbmRGaW5pc2godHJhdmVsUG9pbnRzKSArICc/c3RlcHM9dHJ1ZSZhY2Nlc3NfdG9rZW49JyArIHRoaXMuX3Rva2VuKVxyXG4gICAgICAubWFwKCAoZGF0YTogUm91dGVzICkgPT4ge1xyXG5cclxuICAgICAgICBkYXRhLnJvdXRlc1swXS5sZWdzWzBdLnN0ZXBzLmZvckVhY2goIChzdGVwOiBSb3V0ZVN0ZXApID0+IHtcclxuICAgICAgICAgIHN0ZXAuaW50ZXJzZWN0aW9ucy5mb3JFYWNoKCAoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgcG9pbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGxhdDogaW50ZXJzZWN0aW9uLmxvY2F0aW9uWzFdLFxyXG4gICAgICAgICAgICAgIGxuZzogaW50ZXJzZWN0aW9uLmxvY2F0aW9uWzBdXHJcbiAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldERpc3RhbmNlKCB0cmF2ZWxQb2ludHM6IFRyYXZlbFBvaW50cyApIHtcclxuICAgIHJldHVybiB0aGlzLl9odHRwXHJcbiAgICAgIC5nZXQoIHRoaXMuX2FwaSArIHRoaXMuX2dldFN0YXJ0QW5kRmluaXNoKHRyYXZlbFBvaW50cykgKyAnP2FjY2Vzc190b2tlbj0nICsgdGhpcy5fdG9rZW4gKVxyXG4gICAgICAubWFwKCAoZGF0YTogUm91dGVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEucm91dGVzWzBdLmRpc3RhbmNlO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2dldFN0YXJ0QW5kRmluaXNoKCB0cmF2ZWxQb2ludHM6IFRyYXZlbFBvaW50cyApOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc3RhcnQgPSB0cmF2ZWxQb2ludHMuc3RhcnQubG5nICsgJywnICsgdHJhdmVsUG9pbnRzLnN0YXJ0LmxhdDtcclxuICAgIGNvbnN0IGZpbmlzaCA9IHRyYXZlbFBvaW50cy5maW5pc2gubG5nICsgJywnICsgdHJhdmVsUG9pbnRzLmZpbmlzaC5sYXQ7XHJcbiAgICByZXR1cm4gc3RhcnQgKyAnOycgKyBmaW5pc2g7XHJcbiAgfVxyXG5cclxufSJdfQ==